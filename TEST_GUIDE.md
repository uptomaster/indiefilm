# IndieFilm Hub 테스트 가이드

## 🚀 테스트 전 준비사항

### 1. Firebase 설정 확인
- [ ] Firestore Security Rules 설정 완료 (`firestore.rules` 내용 복사 → 게시)
- [ ] Firestore 인덱스 생성 완료 (상태: "Enabled")
  - `movies` 컬렉션: `genre` + `createdAt`
  - `actors` 컬렉션: `isPublic` + `location` + `ageRange` + `createdAt`

### 2. 웹 앱 실행
```powershell
cd web
npm run dev
```
- 브라우저에서 `http://localhost:3000` 접속 확인

---

## 📋 테스트 시나리오

### 시나리오 1: 배우 프로필 생성 및 확인

#### 1-1. 배우 역할로 회원가입
1. `http://localhost:3000` 접속
2. **회원가입** 클릭
3. 이메일/비밀번호 입력
4. 역할 선택: **🎭 배우** 선택
5. 회원가입 완료

**예상 결과:**
- 홈페이지로 리다이렉트
- 상단 네비게이션에 "내 프로필" 버튼 표시

#### 1-2. 배우 프로필 생성
1. 상단 네비게이션에서 **"내 프로필"** 클릭
   - 또는 직접 `/actors/me` 접속
2. 프로필 정보 입력:
   - 예명: `테스트 배우`
   - 나이대: `20대`
   - 키: `170`
   - 체형: `보통 체형`
   - 지역: `서울`
   - 자기소개: `10자 이상 입력` (예: "연기 경력 3년, 드라마 및 단편영화 출연 경험 다수")
   - 프로필 사진 URL: (선택) 외부 이미지 URL 입력
   - 데모 릴: (선택) YouTube URL 입력
   - 경력: `단편영화 '테스트' 주연` 추가
   - 스킬: `액션`, `댄스` 추가
   - 공개 설정: ✅ 체크
3. **프로필 저장** 클릭

**예상 결과:**
- 저장 성공 메시지
- `/actors/{내-uid}` 페이지로 리다이렉트
- 프로필 정보가 정상적으로 표시됨

#### 1-3. 배우 목록에서 확인
1. 상단 네비게이션에서 **"배우"** 클릭
   - 또는 직접 `/actors` 접속
2. 방금 만든 프로필이 목록에 표시되는지 확인

**예상 결과:**
- 배우 카드에 내 프로필 사진/정보 표시
- 필터링 정상 작동 (지역: 서울, 나이대: 20대)

---

### 시나리오 2: 제작자 역할로 영화 업로드 및 배우 찾기

#### 2-1. 제작자 역할로 회원가입 (새 계정)
1. 로그아웃 (또는 시크릿 모드)
2. **회원가입** 클릭
3. 이메일/비밀번호 입력 (다른 이메일 사용)
4. 역할 선택: **🎬 제작자** 선택
5. 회원가입 완료

#### 2-2. 영화 업로드
1. 상단 네비게이션에서 **"영화 업로드"** 클릭
   - 또는 직접 `/movies/new` 접속
2. 영화 정보 입력:
   - 제목: `테스트 영화`
   - 장르: `드라마`
   - 러닝타임: `30`
   - 한 줄 요약: `테스트용 영화입니다`
   - 상세 설명: `이 영화는 테스트 목적으로 제작되었습니다.`
   - 영상 플랫폼: `YouTube`
   - 영상 URL: 실제 YouTube URL 입력 (예: `https://www.youtube.com/watch?v=dQw4w9WgXcQ`)
   - 썸네일 URL: (선택) 외부 이미지 URL
   - 제작진 크레딧: `감독` - `홍길동` 추가
3. **업로드** 클릭

**예상 결과:**
- 저장 성공
- `/movies` 페이지로 리다이렉트
- 영화 목록에 표시됨

#### 2-3. 배우 검색 및 캐스팅 제안
1. 상단 네비게이션에서 **"배우"** 클릭
2. 검색/필터 테스트:
   - 검색창에 `테스트` 입력 → 내가 만든 배우 프로필 검색
   - 지역 필터: `서울` 선택
   - 나이대 필터: `20대` 선택
3. 배우 카드 클릭하여 상세 페이지 이동
4. **"캐스팅 제안하기"** 버튼 클릭

**예상 결과:**
- "캐스팅 제안이 전송되었습니다!" 알림
- Firestore의 `requests` 컬렉션에 문서 생성 확인

---

### 시나리오 3: 배우가 캐스팅 제안 확인 (나중에 구현)

현재는 `/requests` 페이지가 없으므로, Firestore 콘솔에서 확인:
1. Firebase 콘솔 → Firestore Database → 데이터
2. `requests` 컬렉션 확인
3. 방금 생성된 요청 문서 확인:
   - `type`: `actor_casting`
   - `fromUserId`: 제작자 uid
   - `toUserId`: 배우 uid
   - `status`: `pending`

---

### 시나리오 4: 영화 목록 및 상세 페이지

#### 4-1. 영화 목록 확인
1. 상단 네비게이션에서 **"영화"** 클릭
   - 또는 직접 `/movies` 접속
2. 장르 필터 테스트:
   - `드라마` 선택 → 내가 업로드한 영화만 표시
   - `전체` 선택 → 모든 영화 표시

**예상 결과:**
- 영화 카드 정상 표시
- 썸네일 이미지 표시 (없으면 기본 아이콘)
- 장르 필터링 정상 작동

#### 4-2. 영화 상세 페이지
1. 영화 카드 클릭
2. 상세 페이지 확인:
   - YouTube 영상 임베드 정상 재생
   - 영화 정보 표시
   - 제작진 크레딧 표시

**예상 결과:**
- 영상 플레이어 정상 작동
- 모든 정보 정상 표시

---

## 🐛 문제 해결

### 인덱스 에러 발생 시
**에러 메시지 예시:**
```
The query requires an index. You can create it here: [링크]
```

**해결 방법:**
1. 에러 메시지의 링크 클릭
2. Firebase 콘솔에서 인덱스 생성 페이지로 이동
3. 필요한 필드가 자동으로 입력되어 있음
4. **만들기** 버튼 클릭
5. 인덱스 생성 완료 대기 (몇 분 소요)

### Security Rules 에러 발생 시
**에러 메시지 예시:**
```
Missing or insufficient permissions
```

**해결 방법:**
1. Firebase 콘솔 → Firestore Database → 규칙
2. `firestore.rules` 파일 내용 확인
3. Rules가 정상적으로 게시되었는지 확인
4. 로그인 상태 확인

### 프로필이 목록에 안 보일 때
**확인 사항:**
1. 프로필의 `isPublic` 필드가 `true`인지 확인
   - Firestore 콘솔에서 `actors` 컬렉션 확인
2. 인덱스가 생성되었는지 확인
   - Firestore Database → 인덱스 탭
   - 상태가 "Enabled"인지 확인

---

## ✅ 체크리스트

### 기본 기능
- [ ] 회원가입 (배우 역할)
- [ ] 회원가입 (제작자 역할)
- [ ] 로그인/로그아웃
- [ ] Google 로그인

### 배우 기능
- [ ] 배우 프로필 생성 (`/actors/me`)
- [ ] 배우 프로필 수정
- [ ] 배우 목록 조회 (`/actors`)
- [ ] 배우 검색
- [ ] 배우 필터링 (지역, 나이대)
- [ ] 배우 상세 페이지 (`/actors/[id]`)
- [ ] 캐스팅 제안 받기 (제작자 → 배우)

### 영화 기능
- [ ] 영화 업로드 (`/movies/new`)
- [ ] 영화 목록 조회 (`/movies`)
- [ ] 영화 장르 필터링
- [ ] 영화 상세 페이지 (`/movies/[id]`)
- [ ] YouTube/Vimeo 영상 임베드

### UI/UX
- [ ] 다크 테마 정상 표시
- [ ] 골드 악센트 색상 정상 표시
- [ ] 필름 느낌 디자인 요소 확인
- [ ] 반응형 레이아웃 (모바일/태블릿/데스크톱)

---

## 📝 테스트 데이터 예시

### 배우 프로필 테스트 데이터
```
예명: 김연기
나이대: 20대
키: 170cm
체형: 보통 체형
지역: 서울
자기소개: 연기 경력 5년, 드라마 및 영화 다수 출연. 액션과 멜로 장르 전문.
경력:
  - 단편영화 '별이 빛나는 밤' 주연
  - 웹드라마 '청춘일기' 조연
  - 연극 '햄릿' 단역
스킬: 액션, 댄스, 노래
```

### 영화 테스트 데이터
```
제목: 인디 필름 테스트
장르: 드라마
러닝타임: 30분
한 줄 요약: 대학생들의 우정과 성장을 그린 단편영화
상세 설명: 세 명의 대학생이 함께 영화를 만들며 겪는 이야기...
제작진:
  - 감독: 홍길동
  - 각본: 홍길동
  - 촬영: 김철수
```

---

## 🎯 다음 단계

테스트 완료 후:
1. `/requests` 페이지 구현 (요청 관리)
2. 알림 기능 추가
3. 검색 기능 강화
4. Storage 기능 추가 (이미지 업로드)
