# Firebase Firestore μΈλ±μ¤ μƒμ„± κ°€μ΄λ“

## π“ ν•„ν„°(`isPublic == true`) μ„¤μ • μ„μΉ

Firebase μ½μ†”μ—μ„ μΈλ±μ¤λ¥Ό μƒμ„±ν•  λ• **"μΏΌλ¦¬ λ²”μ„(Query scope)"** μ„Ήμ…μ—μ„ ν•„ν„°λ¥Ό μ„¤μ •ν•©λ‹λ‹¤.

## π― λ°°μ° λ©λ΅ μΈλ±μ¤ μƒμ„± λ°©λ²• (μƒμ„Έ)

### 1λ‹¨κ³„: Firebase μ½μ†” μ ‘μ†
1. https://console.firebase.google.com μ ‘μ†
2. ν”„λ΅μ νΈ μ„ νƒ: `indiefilm-hub`
3. μ™Όμ½ λ©”λ‰΄μ—μ„ **Firestore Database** ν΄λ¦­
4. μƒλ‹¨ νƒ­μ—μ„ **μΈλ±μ¤(Indexes)** ν΄λ¦­

### 2λ‹¨κ³„: μΈλ±μ¤ λ§λ“¤κΈ°
1. **μΈλ±μ¤ λ§λ“¤κΈ°** λ²„νΌ ν΄λ¦­

### 3λ‹¨κ³„: μΈλ±μ¤ μ„¤μ • μ…λ ¥

#### μ»¬λ ‰μ… ID
- `actors` μ…λ ¥

#### ν•„λ“ μ¶”κ°€
λ‹¤μ ν•„λ“λ“¤μ„ μμ„λ€λ΅ μ¶”κ°€:

1. **μ²« λ²μ§Έ ν•„λ“**
   - ν•„λ“ κ²½λ΅: `isPublic`
   - μ •λ ¬: μ¤λ¦„μ°¨μ (Ascending)
   - **μ¤‘μ”**: μ΄ ν•„λ“κ°€ ν•„ν„° μ΅°κ±΄μ…λ‹λ‹¤!

2. **λ‘ λ²μ§Έ ν•„λ“**
   - ν•„λ“ κ²½λ΅: `location`
   - μ •λ ¬: μ¤λ¦„μ°¨μ (Ascending)

3. **μ„Έ λ²μ§Έ ν•„λ“**
   - ν•„λ“ κ²½λ΅: `ageRange`
   - μ •λ ¬: μ¤λ¦„μ°¨μ (Ascending)

4. **λ„¤ λ²μ§Έ ν•„λ“**
   - ν•„λ“ κ²½λ΅: `createdAt`
   - μ •λ ¬: λ‚΄λ¦Όμ°¨μ (Descending)

#### μΏΌλ¦¬ λ²”μ„ (Query scope)
- **μ»¬λ ‰μ…(Collection)** μ„ νƒ
- μ΄ μµμ…μ΄ ν•„ν„°λ¥Ό ν¬ν•¨ν• μΏΌλ¦¬λ¥Ό μ§€μ›ν•©λ‹λ‹¤

### 4λ‹¨κ³„: μƒμ„±
- **λ§λ“¤κΈ°** λ²„νΌ ν΄λ¦­
- μΈλ±μ¤ μƒμ„±μ— λ‡ λ¶„ μ†μ”λ  μ μμµλ‹λ‹¤ (μƒνƒ: "Building" β†’ "Enabled")

---

## π” μ‹¤μ  μΏΌλ¦¬μ™€ μΈλ±μ¤ λ§¤μΉ­

μ½”λ“μ—μ„ μ‚¬μ©ν•λ” μΏΌλ¦¬:
```typescript
query(
  collection(db, "actors"),
  where("isPublic", "==", true),  // ν•„ν„° μ΅°κ±΄
  where("location", "==", "μ„μΈ"), // μ„ νƒμ  ν•„ν„°
  where("ageRange", "==", "20s"),  // μ„ νƒμ  ν•„ν„°
  orderBy("createdAt", "desc")     // μ •λ ¬
)
```

μ΄ μΏΌλ¦¬λ¥Ό μ§€μ›ν•λ ¤λ©΄:
- **ν•„ν„° ν•„λ“**: `isPublic` (ν•­μƒ μ‚¬μ©)
- **μ •λ ¬ ν•„λ“**: `createdAt` (ν•­μƒ μ‚¬μ©)
- **μ„ νƒμ  ν•„ν„°**: `location`, `ageRange` (ν•„μ” μ‹ μ‚¬μ©)

μΈλ±μ¤μ—λ” **λ¨λ“  κ°€λ¥ν• μ΅°ν•©**μ„ ν¬ν•¨ν•΄μ•Ό ν•©λ‹λ‹¤.

---

## β οΈ μ¤‘μ” μ‚¬ν•­

### ν•„ν„° vs μ •λ ¬
- **ν•„ν„°(`where`)**: `isPublic == true` κ°™μ€ μ΅°κ±΄
- **μ •λ ¬(`orderBy`)**: `createdAt desc` κ°™μ€ μ •λ ¬

### μΈλ±μ¤ μƒμ„± κ·μΉ™
1. **ν•„ν„° ν•„λ“λ” μ •λ ¬ ν•„λ“λ³΄λ‹¤ λ¨Όμ €** μΈλ±μ¤μ— ν¬ν•¨λμ–΄μ•Ό ν•©λ‹λ‹¤
2. **λ¨λ“  ν•„ν„° μ΅°κ±΄**μ„ μΈλ±μ¤μ— ν¬ν•¨ν•΄μ•Ό ν•©λ‹λ‹¤
3. **μ •λ ¬ ν•„λ“**λ„ μΈλ±μ¤μ— ν¬ν•¨λμ–΄μ•Ό ν•©λ‹λ‹¤

### μ‹¤μ  μΈλ±μ¤ κµ¬μ΅° μμ‹
```
μ»¬λ ‰μ…: actors
ν•„λ“:
  1. isPublic (Ascending)     β† ν•„ν„° μ΅°κ±΄
  2. location (Ascending)      β† μ„ νƒμ  ν•„ν„°
  3. ageRange (Ascending)      β† μ„ νƒμ  ν•„ν„°
  4. createdAt (Descending)   β† μ •λ ¬ ν•„λ“
μΏΌλ¦¬ λ²”μ„: Collection
```

---

## π¨ μ—λ¬ λ°μƒ μ‹

λ§μ•½ μΈλ±μ¤κ°€ μ—†μ–΄μ„ μΏΌλ¦¬κ°€ μ‹¤ν¨ν•λ©΄:
1. Firebase μ½μ†”μ—μ„ μ—λ¬ λ©”μ‹μ§€ ν™•μΈ
2. μ—λ¬ λ©”μ‹μ§€μ— **μΈλ±μ¤ μƒμ„± λ§ν¬**κ°€ ν¬ν•¨λμ–΄ μμ„ μ μμµλ‹λ‹¤
3. λ§ν¬λ¥Ό ν΄λ¦­ν•λ©΄ μλ™μΌλ΅ ν•„μ”ν• μΈλ±μ¤ μ„¤μ •μ΄ μ…λ ¥λ©λ‹λ‹¤
4. **λ§λ“¤κΈ°** λ²„νΌλ§ ν΄λ¦­ν•λ©΄ λ©λ‹λ‹¤

---

## π“ μ¶”κ°€ μΈλ±μ¤ (μ„ νƒ)

### μν™” λ©λ΅ μΈλ±μ¤
```
μ»¬λ ‰μ…: movies
ν•„λ“:
  1. genre (Ascending)
  2. createdAt (Descending)
μΏΌλ¦¬ λ²”μ„: Collection
```

### λ°°μ° λ‹¨μ λ©λ΅ (ν•„ν„°λ§)
```
μ»¬λ ‰μ…: actors
ν•„λ“:
  1. isPublic (Ascending)
  2. createdAt (Descending)
μΏΌλ¦¬ λ²”μ„: Collection
```

---

## β… ν™•μΈ λ°©λ²•

μΈλ±μ¤ μƒμ„± ν›„:
1. Firestore Database β†’ μΈλ±μ¤ νƒ­
2. μƒμ„±ν• μΈλ±μ¤μ μƒνƒκ°€ **"Enabled"**μΈμ§€ ν™•μΈ
3. μ›Ή μ•±μ—μ„ λ°°μ° λ©λ΅ νμ΄μ§€ ν…μ¤νΈ
4. ν•„ν„°λ§μ΄ μ •μƒ μ‘λ™ν•λ”μ§€ ν™•μΈ

---

## π’΅ ν

- μΈλ±μ¤ μƒμ„±μ€ **μ‹κ°„μ΄ κ±Έλ¦΄ μ μμµλ‹λ‹¤** (λ‡ λ¶„ ~ 10λ¶„)
- μΈλ±μ¤κ°€ μƒμ„±λλ” λ™μ• μ•±μ—μ„ ν•΄λ‹Ή μΏΌλ¦¬λ¥Ό μ‚¬μ©ν•λ©΄ μ—λ¬κ°€ λ°μƒν•  μ μμµλ‹λ‹¤
- κ°λ° μ¤‘μ—λ” **ν…μ¤νΈ λ¨λ“ Rules**λ¥Ό μ‚¬μ©ν•μ—¬ μΈλ±μ¤ μ—†μ΄λ„ ν…μ¤νΈν•  μ μμµλ‹λ‹¤ (ν”„λ΅λ•μ…μ—μ„λ” μ‚¬μ© κΈμ§€!)
